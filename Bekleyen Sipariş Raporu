


--ALTER VIEW [dbo].[FTH_BEKLEYEN_SİPARİŞ_RAPORU]
--AS
SELECT 
CL.CODE AS 'CARİ KODU',
CL.DEFINITION_ AS 'CARİ ÜNVANI',
IT.CODE AS 'MALZEME KODU',
IT.NAME AS 'MALZEME AÇIKLAMASI',
ORF.DATE_ AS 'SİPARİŞ TARİHİ',
--MONTH(ORL.DATE_) AS 'SİPARİŞ AYI',
ORF.FICHENO AS 'SİPARİŞ NUMARASI',
--ORL.DUEDATE AS 'TESLİM TARİHİ',

ORL.AMOUNT AS 'SİPARİŞ MİKTARI',
ORL.SHIPPEDAMOUNT AS 'SEVK EDİLEN MİKTAR',
(ORL.AMOUNT-ORL.SHIPPEDAMOUNT) AS 'BEKLEYEN MİKTAR',
--(ORL.LINENET/ORL.AMOUNT) AS 'NET BİRİM FİYAT',
--((ORL.LINENET/ORL.AMOUNT)*ORL.AMOUNT) AS 'SİPARİŞ TUTARI',
--((ORL.LINENET/ORL.AMOUNT)*ORL.SHIPPEDAMOUNT) AS 'SEVK TUTARI',
--((ORL.LINENET/ORL.AMOUNT)*(ORL.AMOUNT-ORL.SHIPPEDAMOUNT)) AS 'BEKLEYEN TUTAR',
SLS.DEFINITION_ AS 'SATIŞ ELEMANI'
--SUBSTRING(SLS.CODE,1,2) AS 'BÖLGE KODU'



FROM LG_001_01_ORFLINE ORL
LEFT JOIN LG_001_01_ORFICHE ORF ON ORL.ORDFICHEREF=ORF.LOGICALREF
LEFT JOIN LG_001_ITEMS IT ON ORL.STOCKREF=IT.LOGICALREF
LEFT JOIN LG_001_CLCARD CL ON ORL.CLIENTREF=CL.LOGICALREF
LEFT JOIN LG_SLSMAN SLS ON ORL.SALESMANREF=SLS.LOGICALREF
WHERE ORL.TRCODE=1 AND ORL.STATUS<>2 AND 
(ORL.AMOUNT-ORL.SHIPPEDAMOUNT) BETWEEN 1 AND 1000000000 
